{% extends 'main/base.html' %}

{% block title %} Grafica Eventos {% endblock title%}

{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- chartjs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <title>Grafica N1</title>
</head>
<body>
    <div class="right_col" role="main">
        <div class="row">
            <div class="col-md-6 col-sm-6">
                <div class="x_panel tile fixed_height_320 overflow_hidden">
                    <div class="x_title">
                     <h2>Participantes Por Evento</h2>
                       <ul class="nav navbar-right panel_toolbox">
                            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                     </ul>
                     <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <table class="" style="width:100%">
                            <tr>
                                <th style="width:57%">
                                    <p>Cantidad De Participantes por Evento</p>
                                </th>
                            </tr>
                            <td>   
                                <canvas id="grafica" width="100" height="100" style="margin: 10px 10px 10px 0"></canvas>

                                <script> 
                                   var datos = {{ datos|safe }};
                                   var eventos = [];
                                   var participantes = [];
                                    
                                    for (var i = 0; i < datos.length; i++) {
                                        eventos.push(datos[i].evento);
                                        participantes.push(datos[i].participantes);
                                    }
                                    
                                    var ctx = document.getElementById('grafica').getContext('2d');
                                    var chart = new Chart(ctx, {
                                        type: 'pie',
                                        data: {
                                            labels: eventos,
                                            datasets: [{
                                                label: 'Participantes por evento',
                                                data: participantes,
                                                backgroundColor: [
                                                'rgba(255, 99, 132, 0.2)',
                                                'rgba(54, 162, 235, 0.2)',
                                                'rgba(255, 206, 86, 0.2)',
                                                'rgba(75, 192, 192, 0.2)',
                                                'rgba(153, 102, 255, 0.2)',
                                                'rgba(255, 159, 64, 0.2)',
                                                'rgb(0, 255, 255, 0.1)',
                                                'rgb(139, 0, 0, 0.1)',
                                                'rgb(95, 158, 160, 0.1)',
                                                'rgb(139, 0, 139, 0.1)',
                                                'rgb(173, 255, 47, 0.1)'
                                                ], 
                                                borderColor: [
                                                'rgba(255, 99, 132, 1)',
                                                'rgba(54, 162, 235, 1)',
                                                'rgba(255, 206, 86, 1)',
                                                'rgba(75, 192, 192, 1)',
                                                'rgba(153, 102, 255, 1)',
                                                'rgba(255, 159, 64, 1)',
                                                'rgb(0, 255, 255, 1)',
                                                'rgb(139, 0, 0, 1)',
                                                'rgb(95, 158, 160, 1)',
                                                'rgb(139, 0, 139, 1)',
                                                'rgb(173, 255, 47, 1)'
                                                ],
                                                borderWidth: 2
                                            }]
                                        },
                                        options: {
                                            scales: {
                                                y: {
                                                    beginAtZero: true
                                                }
                                            }
                                        }
                                    });
                                </script>
                            </td>     
                        </table>    
                    </div>    
                </div>
            </div>

            <div class="col-md-6 col-sm-6 ">
                <div class="x_panel tile fixed_height_320 overflow_hidden">
                  <div class="x_title">
                    <h2>Eventos</h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div class="x_content">
                    <table class="" style="width:100%">
                      <tr>
                        <th style="width:37%;">
                          <p>Top 5</p>
                        </th>
                        <th>
                          <div class="col-lg-7 col-md-7 col-sm-7 ">
                            <p class="">Device</p>
                          </div>
                          <div class="col-lg-5 col-md-5 col-sm-5 ">
                            <p class="">Progress</p>
                          </div>
                        </th>
                      </tr>
                      <tr>
                        <td>
                          <canvas class="canvasDoughnut" height="140" width="140" style="margin: 15px 10px 10px 0"></canvas>
                        </td>
                        <td>
                          <table class="tile_info">
                            <tr>
                              <td>
                                <p><i class="fa fa-square blue"></i>IOS </p>
                              </td>
                              <td>30%</td>
                            </tr>
                            <tr>
                              <td>
                                <p><i class="fa fa-square green"></i>Android </p>
                              </td>
                              <td>10%</td>
                            </tr>
                            <tr>
                              <td>
                                <p><i class="fa fa-square purple"></i>Blackberry </p>
                              </td>
                              <td>20%</td>
                            </tr>
                            <tr>
                              <td>
                                <p><i class="fa fa-square aero"></i>Symbian </p>
                              </td>
                              <td>15%</td>
                            </tr>
                            <tr>
                              <td>
                                <p><i class="fa fa-square red"></i>Others </p>
                              </td>
                              <td>30%</td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
              </div>

        </div> 
    </div>  
</body>
</html>
{% endblock %}